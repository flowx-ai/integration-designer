# ===================================================================
# OpenID Connect Settings. Default settings are for Keycloak.
# ===================================================================
spring:
  security:
    oauth2:
      resource-server:
        opaque-token:
          introspection-uri: ${security.oauth2.base-server-url}/realms/${security.oauth2.realm}/protocol/openid-connect/token/introspect
          client-id: ${security.oauth2.client.client-id}
          client-secret: ${security.oauth2.client.client-secret}

security:
  type: oauth2
  basic:
    enabled: false
  user:  #only for local environment - in centralized envs will be loaded from application.properties
    name: admin
    password: admin
  pathAuthorizations:
    - path: "/api/**"
      rolesAllowed: "ANY_AUTHENTICATED_USER"
  accessAuthorizations:
    manage-platform:
      scopes:
        admin:
          description: "Admin access"
          rolesAllowed:
            - "ROLE_ADMIN_MANAGE_PLATFORM_ADMIN"
        read:
          description: "Read access"
          rolesAllowed:
            - "ROLE_ADMIN_MANAGE_PLATFORM_READ"
            - "ROLE_ADMIN_MANAGE_PLATFORM_ADMIN"

    manage-users:
      scopes:
        read:
          description: "Read access"
          rolesAllowed:
          - "ROLE_ADMIN_MANAGE_USERS_READ"
          - "ROLE_ADMIN_MANAGE_USERS_EDIT"
          - "ROLE_ADMIN_MANAGE_USERS_ADMIN"
        edit:
          description: "Edit access"
          rolesAllowed:
          - "ROLE_ADMIN_MANAGE_USERS_EDIT"
          - "ROLE_ADMIN_MANAGE_USERS_ADMIN"
        admin:
          description: "Admin access"
          rolesAllowed:
          - "ROLE_ADMIN_MANAGE_USERS_ADMIN"

    manage-processes:
      scopes:
        import:
          description: "Import access"
          rolesAllowed:
          - "ROLE_ADMIN_MANAGE_PROCESS_IMPORT"
          - "ROLE_ADMIN_MANAGE_PROCESS_EDIT"
          - "ROLE_ADMIN_MANAGE_PROCESS_ADMIN"
        read:
          description: "Read access"
          rolesAllowed:
          - "ROLE_ADMIN_MANAGE_PROCESS_READ"
          - "ROLE_ADMIN_MANAGE_PROCESS_IMPORT"
          - "ROLE_ADMIN_MANAGE_PROCESS_EDIT"
          - "ROLE_ADMIN_MANAGE_PROCESS_ADMIN"
        edit:
          description: "Edit access"
          rolesAllowed:
          - "ROLE_ADMIN_MANAGE_PROCESS_EDIT"
          - "ROLE_ADMIN_MANAGE_PROCESS_ADMIN"
        admin:
          description: "Admin access"
          rolesAllowed:
          - "ROLE_ADMIN_MANAGE_PROCESS_ADMIN"

    manage-integrations:
      scopes:
        import:
          description: "Import access"
          rolesAllowed:
          - "ROLE_ADMIN_MANAGE_INTEGRATIONS_IMPORT"
          - "ROLE_ADMIN_MANAGE_INTEGRATIONS_EDIT"
          - "ROLE_ADMIN_MANAGE_INTEGRATIONS_ADMIN"
        read:
          description: "Read access"
          rolesAllowed:
          - "ROLE_ADMIN_MANAGE_INTEGRATIONS_READ"
          - "ROLE_ADMIN_MANAGE_INTEGRATIONS_IMPORT"
          - "ROLE_ADMIN_MANAGE_INTEGRATIONS_EDIT"
          - "ROLE_ADMIN_MANAGE_INTEGRATIONS_ADMIN"
        edit:
          description: "Edit access"
          rolesAllowed:
          - "ROLE_ADMIN_MANAGE_INTEGRATIONS_EDIT"
          - "ROLE_ADMIN_MANAGE_INTEGRATIONS_ADMIN"
        admin:
          description: "Admin access"
          rolesAllowed:
          - "ROLE_ADMIN_MANAGE_INTEGRATIONS_ADMIN"

    manage-configurations:
      scopes:
        import:
          description: "Import access"
          rolesAllowed:
            - "ROLE_ADMIN_MANAGE_CONFIG_IMPORT"
            - "ROLE_ADMIN_MANAGE_CONFIG_EDIT"
            - "ROLE_ADMIN_MANAGE_CONFIG_ADMIN"
        read:
          description: "Read access"
          rolesAllowed:
            - "ROLE_ADMIN_MANAGE_CONFIG_READ"
            - "ROLE_ADMIN_MANAGE_CONFIG_IMPORT"
            - "ROLE_ADMIN_MANAGE_CONFIG_EDIT"
            - "ROLE_ADMIN_MANAGE_CONFIG_ADMIN"
        edit:
          description: "Edit access"
          rolesAllowed:
            - "ROLE_ADMIN_MANAGE_CONFIG_EDIT"
            - "ROLE_ADMIN_MANAGE_CONFIG_ADMIN"
        admin:
          description: "Admin access"
          rolesAllowed:
            - "ROLE_ADMIN_MANAGE_CONFIG_ADMIN"

  oauth2:
    base-server-url: http://localhost:8080
    realm: flowx
    client:
      client-id: flowx-platform-authorize
      client-secret: "1234567890"
      #currently used only for integration tests, for the rest client to login and get access token
      access-token-uri: ${security.oauth2.base-server-url}/realms/${security.oauth2.realm}/protocol/openid-connect/token

    service-account:
      admin:
        client-id: flowx-admin-sa
        client-secret: S4EP7P0GJcNFoBl1r4KNxBgZ88RFdEfN

flowx:
  process:
    defaultRoles: "FLOWX_ROLE"